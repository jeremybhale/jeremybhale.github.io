<div id="answerOne"></div>
<div id="answerTwo"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>
var map = ['......^.^^.....^^^^^^^^^...^.^..^^.^^^..^.^..^.^^^.^^^^..^^.^.^.....^^^^^..^..^^^..^^.^.^..^^..^^^..'];
//tests
//map = ['.^^.^.^^^^'];

var rows = 400000;
var nextRow = '';
var check = '';
var count = 0;

for(var i = 0; i < map[0].length; i++){
	if(map[0][i] == '.'){
		count++;
	}
}

var answerOne = 0;

for(var y = 1; y < rows; y++){
	nextRow = ''
	for(var x = 0; x < map[0].length; x++){
		if(x == 0){
			check = '.' + map[y-1][x] + map[y-1][x+1];
		} else if(x == map[0].length - 1){
			check = map[y-1][x-1] + map[y-1][x] + '.';
		} else {
			check = map[y-1][x-1] + map[y-1][x] + map[y-1][x+1];
		}
		
		if(check[0] == check[2]){
			nextRow += '.';
			count++;
		} else if(check[0] == check[1] && check[0] == '^'){
			nextRow += '^';
		} else if(check[2] == check[1] && check[2] == '^'){
			nextRow += '^';
		} else if(check[0] == '^'){
			nextRow += '^';
		} else if(check[2] == '^'){
			nextRow += '^';
		} else {
			nextRow += '.';
			count++;
		}
	}
	map.push(nextRow);
}

answerOne = count;
$("#answerOne").text(answerOne);
</script>